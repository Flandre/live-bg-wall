# 地下城统计 OBS 浏览器源使用说明

## 🎮 功能特点

- **实时数据更新**: 每2秒自动刷新统计数据
- **多主题支持**: 4种主题风格，匹配直播间背景
- **智能联动**: 妖精数量与副本次数自动同步
- **美观界面**: 参考直播间设计风格，支持透明背景
- **OBS优化**: 专为OBS浏览器源设计，性能优异

## 📋 使用步骤

### 1. 启动服务器
```bash
cd server
node server.js
```
或双击运行 `start.bat`

### 2. 在OBS中添加浏览器源

1. 右键点击场景 → 添加 → 浏览器
2. 输入URL: `http://localhost:13691/obs`
3. 设置宽度: `800-1200` (根据需要调整)
4. 设置高度: `400-800` (根据需要调整)
5. 勾选"关闭源时停用"
6. 勾选"重新激活时刷新浏览器"

### 3. URL参数配置

可以在URL后添加参数来自定义显示效果：

#### 主题选择
- `?theme=default` - 默认蓝紫主题
- `?theme=dark-blue` 或 `?theme=1` - 深蓝主题
- `?theme=liuying` 或 `?theme=2` - 流萤主题  
- `?theme=pink` 或 `?theme=3` - 粉色主题

#### 刷新频率
- `?refresh=2000` - 每2秒刷新 (默认)
- `?refresh=1000` - 每1秒刷新 (更实时但耗性能)
- `?refresh=5000` - 每5秒刷新 (省性能)

#### 组合使用
`http://localhost:13691/obs?theme=liuying&refresh=1000`

## 🎨 主题预览

### 默认主题 (default)
- 主色调: 蓝紫色 (#6464EC)
- 适合: 科技感直播间

### 深蓝主题 (dark-blue)  
- 主色调: 深蓝色 (#574f7d)
- 适合: 沉稳风格直播间

### 流萤主题 (liuying)
- 主色调: 青蓝色 (#4D8997) 
- 适合: 清新风格直播间

### 粉色主题 (pink)
- 主色调: 粉红色 (#ff6680)
- 适合: 可爱风格直播间

## ⚙️ 管理界面

除了OBS展示页面，还提供管理界面：
- 管理界面: `http://localhost:13691`
- 可以手动增减统计数据
- 支持重置功能

## 📊 数据说明

### 联动规则
- 当**普通妖精、银色妖精、金色妖精、宝石妖精**数量变化时，对应的副本次数会自动同步变化
- **猫珠**和**崩坏**不参与联动（因为不是必出的）

### 显示内容
每个地下城显示：
- 🐱 猫本: 次数 + 各种妖精 + 猫珠
- ⚔️ 困高: 次数 + 各种妖精 + 崩坏  
- 🗼 塔本: 次数 + 各种妖精

## 🔧 故障排除

### 页面无法加载
1. 检查服务器是否启动 (`http://localhost:13691` 是否可访问)
2. 检查防火墙设置
3. 尝试重启服务器

### 数据不更新
1. 检查统计文件是否存在: `count/地下城统计新.txt`
2. 查看浏览器控制台是否有错误
3. 尝试刷新OBS浏览器源

### 字体显示异常
1. 确保字体文件存在: `server/public/fonts/`
2. 重启OBS浏览器源

## 📁 文件结构
```
server/
├── public/
│   ├── obs.html           # OBS展示页面
│   ├── index.html         # 管理界面
│   └── fonts/             # 字体文件
├── server.js              # 服务器主程序
├── start.bat              # 启动脚本
└── OBS使用说明.md         # 本说明文件
```

## 🆘 技术支持

如有问题，请检查：
1. Node.js 版本是否支持 (建议 v14+)
2. 端口 13691 是否被占用
3. 统计文件格式是否正确

祝你直播愉快！ 🎉
